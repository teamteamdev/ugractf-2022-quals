#!/usr/bin/env python3

import aiohttp
import asyncio
import sys

async def main():
    board = [["  "] * 42 for _ in range(42)]

    for startup, trajectory in [("U"*28 + "L"*28,         "D" + (("D"*40 + "R" + "U"*40 + "R") * 21)[:-1] + "U" + "L"*41),
                                ("RRRR" + "D"*13 + "R"*9, "U" + (("U"*40 + "L" + "D"*40 + "L") * 21)[:-1] + "D" + "R"*41)] * 4:
        async with aiohttp.ClientSession() as ss:
            ws = await ss.ws_connect("wss://snekpeek.q.2022.ugractf.ru/cb8ed0507e65de8a/ws")
            await ws.receive()
            await ws.send_str(startup)
            while True:
                msg = await ws.receive()
                if msg.type == aiohttp.WSMsgType.TEXT:
                    msg_json = msg.json()
                    print({**msg_json, "tail": "..."})
                    if msg_json["target"]:
                        board[msg_json["target"][1]][msg_json["target"][0]] = "\u2588\u2588"
                        await ws.send_str(trajectory)
                else:
                    break
        for i in board:
            print("".join(i))

asyncio.run(main())
